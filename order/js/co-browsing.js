!function(){var e={91160:function(){window._fc_cbtemplate=window._fc_cbtemplate||{},_fc_cbtemplate.audiopopup='\x3c!-- Audio Control Modal --\x3e<div id="_fc_cb_audio_container" class="fc-request-audio-container fc-modal fc-micro-phone-container">\x3c!-- Modal content --\x3e<div class="fc-modal-content"><div class="fc-modal-header"><h2>{{audiopopup.title}} <span class="fc-agent-name-modal fc-agent-name-on-audio-request"></span></h2></div><div class="fc-modal-body"><p class="fc-call-desc"><span class="fc-agent-name-modal fc-agent-name-on-audio-request"></span> {{audiopopup.call_desc}}</p><p id="_fc_micro_phone_desc" class="fc-micro-phone-desc">{{audiopopup.micro_phone_desc}}</p></div><div class="fc-modal-footer"><input type="button" id="_fc_deny_call" value="{{deny}}" /><input type="button" id="_fc_accept_call" value="{{accept}}" /></div></div></div>',_fc_cbtemplate.cobrowse='\x3c!-- <link href="//webchat-msgreen.freshpori.com/cb_static_file/fc_cb_style.css" rel="stylesheet"> --\x3e<link href="{{host}}/cb_static_file/fc_cb_style.css" rel="stylesheet"><link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><div class="fc-screen-viewing" id="_fc_cb_header_container" tabindex="-1"><div class="fc-header-status"><span id="fc-agent-name-modal-header-name" class="fc-agent-name-modal-header"></span></div><div class="fc-header-div" id="_fc-control-div"><div id="_fc_hide_control" class="cb-tooltip-top fc-hide-bar" data-cb-tooltip="{{cobrowse.tooltip.hide}}" tabindex="0" role="button" aria-label="Hide controls"><img src="{{host}}/cb_static_file/images/icons/ic_minimize.svg" alt="minimize"></div><div class="fc-control-bar"><div class="fc-request-section"><div id="_fc_getBack_Control" class="cb-tooltip-top fc-request-icon-bar"><div id="_fc_getBack_Control_div" class="fc-request-control"></div></div></div><div class="fc-info-section"><div class="fc-image-container fc-wave"><div class="fc-visitor-icon-small fc-wave cb-tooltip-top" data-cb-tooltip="{{cobrowse.tooltip.you}}" tabindex="0" role="button" aria-label="Visitor Icon"><img class="fc-visitor-default" src="{{host}}/cb_static_file/images/icons/ic_user.svg" alt="Visitor"/></div><div id="_fc_visitor_circle" class="fc-circle"></div></div><div id="_fc_timer" class="fc-timer">00:00</div><div class="fc-image-container fc-wave cb-tooltip-top" id="_fc_agent_data_tooltip" data-cb-tooltip="{{cobrowse.tooltip.unknown}}"><div class="fc-agent-icon-small" tabindex="0" role="button" aria-label="Agent Icon"><img class="fc-agent-default" src="{{host}}/cb_static_file/images/icons/ic_user.svg" id="_fc_agent_pic" alt="User"/><span class="fc-agent-status"><div id="_fc_eye_icon" class="fc-view-only"></div></span></div><div id="_fc_agent_circle" class="fc-circle"></div></div></div><div class="fc-action-section"><div id="_fc_muteMic" class="cb-tooltip-top fc-microphone fc-mute fc-mic-hide" data-cb-tooltip="{{cobrowse.tooltip.mute}}"><div class="fc-mute" id="_fc_muteMic-div"></div></div><div id="_fc_endsession" class="cb-tooltip-top fc-endSession" data-cb-tooltip="{{cobrowse.tooltip.end_session}}" tabindex="0"><img src="{{host}}/cb_static_file/images/icons/ic_end_session.svg" alt="End Session"/></div></div></div></div><div class="fc-footer-hide-bar" id="_fc-footer-hide-bar"><div class="cb-tooltip-top fc-show-bar" data-cb-tooltip="{{cobrowse.tooltip.show}}" id="_fc_show_control" tabindex="0" role="button" aria-label="Show Controls"><img src="{{host}}/cb_static_file/images/icons/ic_maximize.svg" alt="Maximize"></div><div class="fc-timer">00:00</div><div id="_fc_muteMic_small" class="fc-microphone-small fc-mute fc-mic-hide" data-cb-tooltip="{{cobrowse.tooltip.mute}}"><div class="fc-mute" id="_fc_muteMic_small_div"></div></div></div></div>\x3c!-- Access control Modal --\x3e<div id="_fc_cb_message_container" class="fc-request-msg-container fc-modal">\x3c!-- Modal content --\x3e<div class="fc-modal-content"><div class="fc-modal-header"><h2><span class="fc-agent-name-modal _fc_agent_name_req"></span> {{cobrowse.access_control.title}}</h2></div><div class="fc-modal-body"><p><span class="fc-agent-name-modal _fc_agent_name_req"></span> {{cobrowse.access_control.desc}}</p></div><div class="fc-modal-footer"><input type="button" id="_fc_DenyedControl" value="{{deny}}" /><input type="button" id="_fc_allowControl" value="{{allow}}" /></div></div></div>\x3c!-- Session confirmation Modal --\x3e<div id="_fc_cb_notifyContainer" class="fc-confirm-msg-container fc-modal">\x3c!-- Modal content --\x3e<div class="fc-modal-content"><div class="fc-modal-header"><h2>{{cobrowse.end_session.title}}</h2></div><div class="fc-modal-body"><p>{{cobrowse.end_session.desc}}</p></div><div class="fc-modal-footer"><input type="button" id="_fc_close_modal_window" value="{{no}}" /><input type="button" id="_fc_close_session" value="{{yes}}" /></div></div></div>\x3c!-- Session Notification--\x3e<div id ="_fc_close_msg" class="fc-notify-exit fc-notification"><div class="fc-notify"><p class="fc-notify-text" id="_fc-notify-text"></p><span id="_fc_notify_close"><span>x</span></span></div></div>'}},t={};function i(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,i),a.exports}!function(){"use strict";var e="Unknown",t="View only",n="is viewing your screen.",o="You have gained back control over the tab.",a="Unmute",c="Mute",s="localStorage",l="sessionStorage",r={disableAudioCalls:"DISABLE_AUDIO_CALLS",initiate:"AGENTS_CAN_INITIATE_AUDIO_CALL",startAutomatically:"AUTOMATICALLY_START_AUDIO_CALL"},d=function(){return function(e,t){if(e!==undefined)throw new TypeError("Cannot instantiate an arrow function")}(this),{isAvailable:function(e){var t,i="__storage_test__";try{return(t=window[e]).setItem(i,i),t.removeItem(i),!0}catch(e){return e instanceof window.DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==t.length}},setItem:function(e,t,i){this.isAvailable(e)?window[e].setItem(t,i):(window.fc_store_fall_back||(window.fc_store_fall_back={localStorage:{},sessionStorage:{}}),window.fc_store_fall_back[e][t]=i)},getItem:function(e,t){return this.isAvailable(e)?window[e].getItem(t):window.fc_store_fall_back&&window.fc_store_fall_back[e]&&window.fc_store_fall_back[e][t]},removeItem:function(e,t){this.isAvailable(e)?window[e].removeItem(t):window.fc_store_fall_back&&window.fc_store_fall_back[e]&&window.fc_store_fall_back[e][t]&&delete window.fc_store_fall_back[e][t]}}}.bind(void 0)();function u(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}var f=function(){return u(this,void 0),{timeOut:null,setStartTime:function(){d.setItem(l,"_fc_start_time",new Date)},getStarttime:function(){return d.getItem(l,"_fc_start_time")},resetStartTime:function(){d.removeItem(l,"_fc_start_time")},secondsToHms:function(){var e=Number(((new Date).getTime()-new Date(this.getStarttime()).getTime())/1e3);return{h:Math.floor(e/3600),m:Math.floor(e%3600/60),s:Math.floor(e%3600%60)}},clearTimer:function(){this.timeOut&&clearInterval(this.timeOut)},startTimer:function(){var e=this;this.clearTimer();var t=0,i=0,n=0;if(this.getStarttime()){var o=this.secondsToHms();t=o.s,i=o.m,n=o.h}else this.setStartTime();var a=function(){u(this,e);var o=document.getElementsByClassName("fc-timer");++t>=60&&(t=0,++i>=60&&(i=0,n++));for(var a=0;a<o.length;a++)o[a].textContent=(n?n>9?n:"0"+n:"00")+":"+(i?i>9?i:"0"+i:"00")+":"+(t>9?t:"0"+t)}.bind(this);this.timeOut=setInterval(a,1e3)}}}.bind(void 0)(),_=function(){return function(e,t){if(e!==undefined)throw new TypeError("Cannot instantiate an arrow function")}(this),{init:function(){this.agentPic=this.getByID("_fc_agent_pic"),this.agentName=this.getByID("fc-agent-name-modal-header-name"),this.muteMic=this.getByID("_fc_muteMic"),this.notifyText=this.getByID("_fc-notify-text"),this.getBackControl=this.getByID("_fc_getBack_Control"),this.getBackControlContainer=this.getByID("_fc_getBack_Control_div"),this.agentNameOnRequest=document.getElementsByClassName("_fc_agent_name_req"),this.muteMicSmall=this.getByID("_fc_muteMic_small"),this.endSession=this.getByID("_fc_endsession"),this.closeModalWindow=this.getByID("_fc_close_modal_window"),this.closeSession=this.getByID("_fc_close_session"),this.denyedControl=this.getByID("_fc_DenyedControl"),this.allowControl=this.getByID("_fc_allowControl"),this.hideControl=this.getByID("_fc_hide_control"),this.showControl=this.getByID("_fc_show_control"),this.notifyClose=this.getByID("_fc_notify_close"),this.agentDataToolTip=this.getByID("_fc_agent_data_tooltip"),this.visitoCircle=this.getByID("_fc_visitor_circle"),this.agentCircle=this.getByID("_fc_agent_circle"),this.closeMessage=this.getByID("_fc_close_msg"),this.muteMicContainer=this.getByID("_fc_muteMic-div"),this.muteMicSmallContainer=this.getByID("_fc_muteMic_small_div"),this.eyeIcon=this.getByID("_fc_eye_icon"),this.controlContainer=this.getByID("_fc-control-div"),this.footerHideBar=this.getByID("_fc-footer-hide-bar"),this.headerContainer=this.getByID("_fc_cb_header_container"),this.notifyContainer=this.getByID("_fc_cb_notifyContainer"),this.topHeader=this.getByID("_fc_hide_top"),this.messageContainer=this.getByID("_fc_cb_message_container")},audioInit:function(){this.audioContainer=this.getByID("_fc_cb_audio_container"),this.agentNameOnAudioRequest=document.getElementsByClassName("fc-agent-name-on-audio-request"),this.acceptCall=this.getByID("_fc_accept_call"),this.denyCall=this.getByID("_fc_deny_call")},bindEvent:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e&&(e.addEventListener?(e.removeEventListener(t,i,n),e.addEventListener(t,i,n)):(e.detachEvent(t,i,n),e.attachEvent(t,i,n)))},unbindEvent:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e&&(e.removeEventListener?e.removeEventListener(t,i,n):e.detachEvent(t,i,n))},getByID:function(e){return document.getElementById(e)},show:function(e){return e&&(e.style.display="block"),this},hide:function(e){return e&&(e.style.display="none"),this},setAttribute:function(e,t,i){return e&&e.setAttribute(t,i)},getAttribute:function(e,t){return e&&e.getAttribute(t)},addClass:function(e,t){return e&&e.classList&&t&&e.classList.add(t)},removeClass:function(e,t){return e&&e.classList&&t&&e.classList.remove(t)},replaceClass:function(e,t,i){this.removeClass(e,t),this.addClass(e,i)},setValue:function(e,t){if(e)for(var i=e.length,n=0;n<i;n++)e[n].innerText=t}}}.bind(void 0)(),m=function(){return function(e,t){if(e!==undefined)throw new TypeError("Cannot instantiate an arrow function")}(this),{notifyTimer:function(){setTimeout(this.close.bind(this),3e3)},show:function(e){_.notifyText.innerText=e,_.removeClass(_.closeMessage,"fc-notify-exit"),clearTimeout(this.notifyTimer),this.notifyTimer()},close:function(){_.addClass(_.closeMessage,"fc-notify-exit"),clearTimeout(this.notifyTimer)}}}.bind(void 0)();function h(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}var v=function(){return h(this,void 0),{getBackCtrl:function(){if(d.getItem(l,"_fc_isControlling")){OneClickCbUtils.takeControl(),this.gainedControlCSSAction(),_.getBackControl.removeAttribute("data-cb-tooltip"),_.replaceClass(_.eyeIcon,"fc-view-control","fc-view-only");var e=OneClickCbUtils.safeSessionGetItem("_fc_cb_agentName");_.agentName.innerText="".concat(e," ").concat(n),_.setAttribute(_.agentDataToolTip,"data-cb-tooltip","".concat(e," (").concat(t,")")),d.removeItem(l,"_fc_isControlling"),m.show(o)}},transferCompleteCSSAction:function(){_.replaceClass(_.getBackControl,"fc-request-control","fc-return-control"),_.replaceClass(_.getBackControlContainer,"fc-request-control","fc-return-control")},gainedControlCSSAction:function(){_.replaceClass(_.getBackControl,"fc-return-control","fc-request-control"),_.replaceClass(_.getBackControlContainer,"fc-return-control","fc-request-control")},endScreenonClick:function(){OneClickCbUtils.cobrowsingEnd();var e=window.frames.fc_widget,t=_.getAttribute(_.endSession,"data-channelId");e.postMessage({event_id:"endScreenShare",channelId:t},D.host)},denyControl:function(){d.removeItem(l,"isRequested"),OneClickCbUtils.master.send({type:"denyControl"}),_.hide(_.messageContainer),m.show("You have denied the view & control request.")},allowControl:function(){OneClickCbUtils.giveControl(),this.allowControlDomEvents.call(this)},allowControlDomEvents:function(e){var t=OneClickCbUtils.safeSessionGetItem("_fc_cb_agentName");_.agentName.innerText="".concat("You are on a Co-browsing session with"," ").concat(t,"."),_.setAttribute(_.agentDataToolTip,"data-cb-tooltip","".concat(t," (").concat("View & Control",")")),_.hide(_.messageContainer),e||m.show("Agent can now view & control this tab."),_.setAttribute(_.getBackControl,"data-cb-tooltip","Get back control"),_.replaceClass(_.eyeIcon,"fc-view-only","fc-view-control")},hideControlDiv:function(){var e=this;_.replaceClass(_.controlContainer,"fc-slideOutUp","fc-slideOutDown"),_.hide(_.controlContainer),setTimeout(function(){h(this,e),_.replaceClass(_.footerHideBar,"fc-slideOutDown","fc-slideInUp"),_.show(_.footerHideBar);var t=document.querySelector(".fc-show-bar");t&&t.focus()}.bind(this),100)},hideFooterDiv:function(){var e=this;_.replaceClass(_.footerHideBar,"fc-slideOutUp","fc-slideOutDown"),_.hide(_.footerHideBar),setTimeout(function(){h(this,e),_.replaceClass(_.controlContainer,"fc-slideOutDown","fc-slideInUp"),_.show(_.controlContainer);var t=document.querySelector(".fc-screen-viewing");t&&t.focus()}.bind(this),100)},requestControl:function(){_.show(_.messageContainer),_.setValue(_.agentNameOnRequest,D.agentName),d.setItem(l,"isRequested",!0),this.hideControlDiv.call(this)},transferComplete:function(){d.setItem(l,"_fc_isControlling",!0),this.transferCompleteCSSAction(),this.allowControlDomEvents.call(this,!0),window.fcWidget.close()},gainedControlBack:function(){d.removeItem(l,"_fc_isControlling");var e=OneClickCbUtils.safeSessionGetItem("_fc_cb_agentName");_.agentName.innerText="".concat(e," ").concat(n),this.gainedControlCSSAction(),_.replaceClass("_fc_eye_icon","fc-view-control","fc-view-only"),m.show(o)},checkforControl:function(){d.getItem(l,"_fc_isControlling")?this.transferCompleteCSSAction():this.gainedControlCSSAction()}}}.bind(void 0)(),g=function(){return function(e,t){if(e!==undefined)throw new TypeError("Cannot instantiate an arrow function")}(this),{hideEndSession:function(){var e=document.querySelector(".fc-screen-viewing");_.hide(_.notifyContainer),e&&e.focus()},showEndSession:function(){var e=document.querySelector("#app-conversation-editor");_.show(_.notifyContainer),e&&e.focus()}}}.bind(void 0)(),C=function(){return function(e,t){if(e!==undefined)throw new TypeError("Cannot instantiate an arrow function")}(this),{addListnersForControl:function(){_.bindEvent(_.muteMic,"click",A.muteMic.bind(A)),_.bindEvent(_.muteMicSmall,"click",A.muteMic.bind(A)),_.bindEvent(_.getBackControl,"click",v.getBackCtrl.bind(v)),_.bindEvent(_.endSession,"click",g.showEndSession.bind(g)),_.bindEvent(_.closeModalWindow,"click",g.hideEndSession.bind(g)),_.bindEvent(_.closeSession,"click",v.endScreenonClick.bind(v)),_.bindEvent(_.denyedControl,"click",v.denyControl.bind(v)),_.bindEvent(_.allowControl,"click",v.allowControl.bind(v)),_.bindEvent(_.hideControl,"click",v.hideControlDiv.bind(v)),_.bindEvent(_.showControl,"click",v.hideFooterDiv.bind(v)),_.bindEvent(_.notifyClose,"click",m.close.bind(m))},addListnersForAudio:function(){_.bindEvent(_.acceptCall,"click",y.acceptCall.bind(y)),_.bindEvent(_.denyCall,"click",y.denyCall.bind(y))}}}.bind(void 0)(),w={"en-us":{audiopopup:{title:"Incoming audio call from",call_desc:"is requesting for an audio call with this co-browsing session (Once you accept, you can mute the call at any time).",micro_phone_desc:"This will require access to your microphone. Please ensure you 'allow' access."},cobrowse:{access_control:{title:"wants to co-browse with you",desc:"will be able to view & control actions on the current tab only."},end_session:{title:"End Session",desc:"Are you sure you want to end this session?"},tooltip:{mute:"Mute",show:"Show",end_session:"End session",unknown:"Unknown",you:"You",hide:"Hide"}},yes:"Yes",no:"No",allow:"Allow",deny:"Deny",accept:"Accept"}};function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}var p=function(){return function(e,t){if(e!==undefined)throw new TypeError("Cannot instantiate an arrow function")}(this),{i18n:function(e,t){t||(t=window.navigator.languages&&window.navigator.languages.length&&window.navigator.languages[0]||window.navigator.language),w.hasOwnProperty(t)||(t="en-us");var i=w[t];return this.data=e,this.doTraverse(i),this.data},doTraverse:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";for(var i in e)e.hasOwnProperty(i)&&("object"===b(e[i])?this.doTraverse(e[i],(t?t+".":"")+i):this.doTranslate(e[i],(t?t+".":"")+i))},doTranslate:function(e,t){this.data&&(this.data=this.data.replace(new RegExp("{{"+t+"}}","g"),e))}}}.bind(void 0)(),y=function(){return function(e,t){if(e!==undefined)throw new TypeError("Cannot instantiate an arrow function")}(this),{isAudioPopupLoaded:!1,acceptCall:function(){d.setItem(s,"_fc_audio_permission",!0),d.getItem(l,"_fc_audio_window_initialized")?S.commonChannel.send({event:"_fc_audio_call_value",value:!0}):(this.initializeAudioWindow(),this.isAutomaticCall&&D.loadOrStartCobrowsing()),_.hide(_.audioContainer)},denyCall:function(){d.getItem(l,"_fc_audio_window_initialized")?(S.commonChannel.send({event:"_fc_audio_call_value",value:!1}),m.show("You have declined the audio call.")):this.isAutomaticCall?D.loadOrStartCobrowsing():this.sendEventToParent("deniedAudioCall"),_.hide(_.audioContainer)},showPopup:function(t){D.cb_data=t,D.agentName=t.agentName||e;var i=t&&t.cobrowsingSettings&&t.cobrowsingSettings.audio;this.isAutomaticCall=!i||i===r.startAutomatically,this.isAutomaticCall?d.getItem(s,"_fc_audio_permission")?(this.initializeAudioWindow(),D.loadOrStartCobrowsing()):this.showAudioPopup():D.loadOrStartCobrowsing()},requestForAudioCall:function(){d.getItem(l,"_fc_call_initated")?this.showAudioPopup():this.acceptCall()},showAudioPopup:function(){var e=d.getItem(s,"_fc_audio_permission");this.isAudioPopupLoaded||this.generatePopupDom(),e?_.removeClass(_.audioContainer,"fc-micro-phone-container"):_.addClass(_.audioContainer,"fc-micro-phone-container"),_.show(_.audioContainer),_.setValue(_.agentNameOnAudioRequest,D.agentName)},disconnectedByDialer:function(){_.hide(_.audioContainer)},initializeAudioWindow:function(){if(!d.getItem(l,"_fc_audio_window_initialized")){var e=D.cb_data,t=e.app_alias,i=e.viewerId,n=e.conversationId,o=t+"-"+n+"-"+i;window.open(D.host+"/cb_static_file/audio.html?isMuted=false&app_alias="+t+"&clientId="+o+"&conversationId="+n+"&viewerId="+i,"_blank","audioWindow","toolbar=no, scrollbars=yes, resizable=no, top=30, left=100, width=auto, height=auto"),d.setItem(l,"_fc_audio_window_initialized",!0)}},readyToAcceptCall:function(){this.isAutomaticCall||this.sendEventToParent("acceptedAudioCall")},sendEventToParent:function(e){window.frames.fc_widget.postMessage({event_id:e,data:D.cb_data},D.host)},generatePopupDom:function(){this.isAudioPopupLoaded=!0;var e=p.i18n(window._fc_cbtemplate.audiopopup,D.locale);document.body.appendChild(document.createRange().createContextualFragment(e)),_.audioInit(),C.addListnersForAudio()},addStyleSheet:function(){var e,t=document,i=t.createElement("link");e=D.host,i.href=e+"/widget/css/cb.css?t="+(new Date).getTime(),i.rel="stylesheet",t.getElementsByTagName("head")[0].appendChild(i)},init:function(e){var t=e.max,i=e.whoIsSpeeking;t?"you"===i?(_.addClass(_.visitoCircle,"delay1"),_.removeClass(_.agentCircle,"delay1")):(_.addClass(_.agentCircle,"delay1"),_.removeClass(_.visitoCircle,"delay1")):(_.removeClass(_.visitoCircle,"delay1"),_.removeClass(_.agentCircle,"delay1"))}}}.bind(void 0)();function I(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}var S=function(){return I(this,void 0),{audioChannel:null,commonChannel:null,register:function(){var e=this;this.audioChannel||(this.audioChannel=new TabsChannel({id:"_fc_channel_for_audio_data"}),this.audioChannel.onReceive=function(t){switch(I(this,e),t&&t.event){case"initAudioBar":y.init(t);break;case"showMic":A.show();break;case"hideMic":A.hide();break;case"_fc_mute_value":A.updateIcon(t.value);break;case"requestForAudioCall":y.requestForAudioCall();break;case"readyToAcceptCall":y.readyToAcceptCall();break;case"disconnectedByDialer":y.disconnectedByDialer()}}.bind(this)),this.commonChannel||(this.commonChannel=new TabsChannel({id:"_fc_common_channel"}),this.commonChannel.onReceive=function(t){switch(I(this,e),event){case"showMic":A.show();break;case"_fc_mute_value":A.updateIcon(t.value)}}.bind(this))}}}.bind(void 0)(),A=function(){return function(e,t){if(e!==undefined)throw new TypeError("Cannot instantiate an arrow function")}(this),{show:function(){d.setItem(l,"_fc_call_initated",!0),_.removeClass(_.muteMicSmall,"fc-mic-hide"),_.removeClass(_.muteMic,"fc-mic-hide"),m.show("Audio call connected")},hide:function(){_.addClass(_.muteMic,"fc-mic-hide"),_.addClass(_.muteMicSmall,"fc-mic-hide"),d.getItem(l,"_fc_call_initated")&&m.show("Audio call ended")},updateIcon:function(e){e?this.toggleDOM(!0):this.toggleDOM(!1)},toggleDOM:function(e){e?(_.replaceClass(_.muteMicContainer,"fc-mute","fc-unmute"),_.replaceClass(_.muteMic,"fc-mute","fc-unmute"),_.replaceClass(_.muteMicSmallContainer,"fc-mute","fc-unmute"),_.replaceClass(_.muteMicSmall,"fc-mute","fc-unmute"),_.setAttribute(_.muteMic,"data-cb-tooltip",a),_.setAttribute(_.muteMicSmall,"data-cb-tooltip",a)):(_.replaceClass(_.muteMicContainer,"fc-unmute","fc-mute"),_.replaceClass(_.muteMic,"fc-unmute","fc-mute"),_.replaceClass(_.muteMicSmallContainer,"fc-unmute","fc-mute"),_.replaceClass(_.muteMicSmall,"fc-unmute","fc-mute"),_.setAttribute(_.muteMic,"data-cb-tooltip",c),_.setAttribute(_.muteMicSmall,"data-cb-tooltip",c)),d.setItem(s,"_fc_mute_value",e)},muteMic:function(){var e=_.muteMic,t=e&&e.classList&&Object.values(e.classList)&&Object.values(e.classList).indexOf("fc-mute")>-1;S.commonChannel.send({event:"_fc_mute_value",value:t}),this.toggleDOM(t)}}}.bind(void 0)(),k=function(){return function(e,t){if(e!==undefined)throw new TypeError("Cannot instantiate an arrow function")}(this),{generate:function(e){D.isLoaded=!0;var t=document.createElement("script");t.src="".concat(D.host,"/cb_static_file/fcCblib.js"),e&&(t.onload=e),document.body.appendChild(t);var i=p.i18n(window._fc_cbtemplate.cobrowse,D.locale);document.body.appendChild(document.createRange().createContextualFragment(i.replace(new RegExp("{{host}}","g"),D.host))),_.init(),d.getItem(l,"_fc_call_initated")&&(_.removeClass(_.muteMic,"fc-hide-div"),"true"===d.getItem(s,"_fc_mute_value")?_.replaceClass(_.muteMic,"fc-unmute","fc-mute"):_.replaceClass(_.muteMic,"fc-mute","fc-unmute"));var n=d.getItem(s,"_fc_cb_agentPic");n&&(_.agentPic.src=n,_.replaceClass(_.agentPic,"fc-agent-default","fc-agent")),C.addListnersForControl()},updateNameAndMike:function(){var e=OneClickCbUtils.safeSessionGetItem("_fc_cb_agentName"),i="true"===d.getItem(s,"_fc_mute_value");_.agentName.innerText="".concat(e," ").concat(n),_.setAttribute(_.agentDataToolTip,"data-cb-tooltip","".concat(e," (").concat(t,")"));var o=document.getElementsByTagName("html")&&document.getElementsByTagName("html")[0];o&&o.classList&&Object.values(o.classList)&&-1===Object.values(o.classList).indexOf("lc-cb-controlling-vi")&&o.classList.add("lc-cb-controlling-vi"),A.toggleDOM(i),_.show(_.headerContainer),_.show(_.topHeader)}}}.bind(void 0)();function T(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}i(91160);var D=function(){return T(this,void 0),{agentName:null,isLoaded:!1,cb_data:null,startCoborowsing:function(){var t=document.querySelector(".fc-screen-viewing");t&&t.focus(),f.setStartTime();var i=this.cb_data,n=i.name,o=i.app_alias,a=i.role,c=i.viewerId,l=i.conversationId,r=i.sdata,u=i.messageId,m=i.agentName,h=i.messageUserId,v=i.isMuted,g=i.cobrowsingId,C=i.channelId,w=i.pic;this.agentName=m||e,this.cb_data?OneClickCbUtils.cobrowsingStart(n,a,c,r,o,l,h):OneClickCbUtils.cobrowsingStart();var b=OneClickCbUtils.getRoom(),p=!0;b||(p=!1),window.frames.fc_widget.postMessage({event_id:"startScreenShare",cb_data:{room:b,name:n,isCbstarted:p,conversationId:l,messageId:u,messageUserId:h,app_alias:o,role:a,viewerId:c,sdata:r,cobrowsingId:g,channelId:C,startTime:f.getStarttime()}},this.host),m||(m=e),OneClickCbUtils.safeSessionSetItem("_fc_cb_agentName",m||e),d.setItem(s,"_fc_cb_agentName",m||e),d.setItem(s,"_fc_cb_agentPic",w),d.setItem(s,"_fc_mute_value",v),_.setAttribute(_.endSession,"data-channelId",C)},onCobrowsingStart:function(){S.register(),k.updateNameAndMike(),f.startTimer(),d.getItem(l,"_fc_isRequested")&&v.requestControl(),d.getItem(l,"_fc_isControlling")&&v.allowControlDomEvents.call(this,!0),v.checkforControl()},onCobrowsingEnd:function(){this.cleanUp()},allowScreenShare:function(e){y.showPopup(e.data.cbData)},requestForAudioCall:function(){y.showAudioPopup()},requestForControl:function(){v.requestControl()},gainedControlBack:function(){v.gainedControlBack()},lostControl:function(){v.transferComplete()},init:function(){"true"===d.getItem(l,"1click-cobrowsing")&&k.generate(),y.addStyleSheet()},loadOrStartCobrowsing:function(){var e=this;this.isLoaded?this.startCoborowsing():k.generate(function(){T(this,e),this.startCoborowsing()}.bind(this))},cleanUp:function(){d.removeItem(l,"_fc_call_initated"),d.removeItem(l,"_fc_audio_window_initialized"),document.getElementsByTagName("html")[0].classList.remove("lc-cb-controlling-vi"),_.hide(_.headerContainer),f.clearTimer(),_.hide(_.messageContainer),_.hide(_.audioContainer),_.hide(_.notifyContainer),d.removeItem(l,"_fc_isControlling"),d.removeItem(l,"_fc_isRequested"),d.removeItem(s,"_fc_mute_value"),OneClickCbUtils.cobrowsingEnd(),f.resetStartTime(),v.checkforControl(),A.hide(),S.commonChannel.send({event:"_fc_cobrowsing_closed",value:!0}),window._fc_cb_AudioConnection=null}}}.bind(void 0)();!function(e,t){var i=e.fc_cobrowse&&e.fc_cobrowse.host,n=e.fc_cobrowse.locale;i&&(t.host=i,t.locale=n,e.fc_cobrowse=t,t.init())}(window,D)}()}();